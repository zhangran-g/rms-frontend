import{ay as z,Y as g,y as o,n as C,K as M,e as r,r as u,az as T,aA as W}from"./index-e9572a3e.js";import{m as R}from"./message-2e7cc4d3.js";const S=n=>z.request("post","/role",{data:n});function L(){const n=g({name:"",status:"",status2:""}),d=o([]),l=o(!0),a=o({}),c=g({total:0,pageSize:10,currentPage:1,background:!0}),p=[{type:"selection",width:55,align:"left",hide:({checkList:e})=>!e.includes("勾选列")},{label:"序号",type:"index",width:70,hide:({checkList:e})=>!e.includes("序号列")},{label:"申请编号",prop:"id",minWidth:100},{label:"申请人名字",prop:"name",minWidth:120},{label:"申请类型",prop:"type",minWidth:150,cellRenderer:({row:e,props:t})=>r(u("el-tag"),{size:t.size,type:e.type===1?"danger":"",effect:"plain"},{default:()=>[e.type===1?"前端":"后端"]})},{label:"初审状态",minWidth:130,cellRenderer:e=>{var t;return r(u("el-switch"),{size:e.props.size==="small"?"small":"default",loading:(t=a.value[e.index])==null?void 0:t.loading,modelValue:e.row.status,"onUpdate:modelValue":s=>e.row.status=s,"active-value":1,"inactive-value":0,"active-text":"已通过","inactive-text":"未通过","inline-prompt":!0,onChange:()=>m(e)},null)}},{label:"面试状态",minWidth:130,cellRenderer:e=>{var t;return r(u("el-switch"),{size:e.props.size==="small"?"small":"default",loading:(t=a.value[e.index])==null?void 0:t.loading,modelValue:e.row.status2,"onUpdate:modelValue":s=>e.row.status2=s,"active-value":1,"inactive-value":0,"active-text":"已通过","inactive-text":"未通过","inline-prompt":!0,onChange:()=>m(e)},null)}},{label:"创建时间",minWidth:180,prop:"createTime",formatter:({createTime:e})=>T(e).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",width:180,slot:"operation"}],h=C(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]);function m({row:e,index:t}){W.confirm(`确认要<strong>${e.status===0?"拒绝":"通过"}</strong><strong style='color:var(--el-color-primary)'>${e.name}</strong>申请吗?`,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,draggable:!0}).then(()=>{a.value[t]=Object.assign({},a.value[t],{loading:!0}),setTimeout(()=>{a.value[t]=Object.assign({},a.value[t],{loading:!1}),R("已成功修改申请状态",{type:"success"})},300)}).catch(()=>{e.status===0?e.status=1:e.status=0})}function v(e){}function f(e){}function y(e){}function b(e){}function x(e){}async function i(){l.value=!0;const{data:e}=await S();d.value=e.list,c.total=e.total,setTimeout(()=>{l.value=!1},500)}const w=e=>{e&&(e.resetFields(),i())};return M(()=>{i()}),{form:n,loading:l,columns:p,dataList:d,pagination:c,buttonClass:h,onSearch:i,resetForm:w,handleUpdate:v,handleDelete:f,handleSizeChange:y,handleCurrentChange:b,handleSelectionChange:x}}export{L as useRole};
